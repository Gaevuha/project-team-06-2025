{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/artists-api.js","../src/js/render-function.js","../src/js/modal.js","../src/js/feedback.js","../src/js/header.js"],"sourcesContent":["export default {\n    artists: document.querySelector('.list-artists'),\n    modalAlbumList: document.querySelector('.modal-list__album'),\n\n};","import axios from 'axios';\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\n\nexport async function getArtists(currentPage = 1) {\n  const params = { limit: 8, page: currentPage };\n  const endPoint = `/artists`;\n\n  try {\n    const res = await axios.get(endPoint, { params });\n    return res.data;\n  } catch (error) {\n    console.error('Помилка при завантаженні артистів:', error.message);\n    throw error;\n  }\n}\n\nexport async function getArtistById(artistId) {\n  const endPoint = `/artists/${artistId}`;\n  try {\n    const res = await axios.get(endPoint);\n    console.log(res.data);\n    return res.data;\n  } catch (error) {\n    console.error('Помилка при отриманні артиста:', error.message);\n    throw error;\n  }\n}\n\nexport async function getArtistsAlbumsId(artistId) {\n  const endPoint = `/artists/${artistId}/albums`;\n  try {\n    const res = await axios.get(endPoint);\n    return res.data;\n  } catch (error) {\n    console.error('Помилка при отриманні альбомів артиста:', error.message);\n    throw error;\n  }\n}\n\nexport async function getFeedback(page = 1) {\n  const dataFeedback = [];\n  const endPoint = '/feedbacks';\n  const limit = 25;\n  const params = { limit, page };\n\n  try {\n    // Перший фідбек\n    const resFirst = await axios.get(endPoint, { params });\n    const resFirstArray = resFirst.data.data;\n    const firstFeedback = resFirstArray[0];\n    dataFeedback.push(firstFeedback);\n\n    const total = resFirst.data.total;\n    const maxPage = Math.ceil(total / limit);\n\n    // Рандомний фідбек\n    let randomPage;\n    do {\n      randomPage = Math.floor(Math.random() * maxPage) + 1;\n    } while (randomPage === 1 || randomPage === maxPage);\n\n    const resThird = await axios.get(endPoint, {\n      params: { limit, page: randomPage }\n    });\n    const resThirdArray = resThird.data.data;\n    const randomFeedback =\n      resThirdArray[Math.floor(Math.random() * resThirdArray.length)];\n    dataFeedback.push(randomFeedback);\n\n    // Останній фідбек\n    const resSecond = await axios.get(endPoint, {\n      params: { limit, page: maxPage }\n    });\n    const resSecondArray = resSecond.data.data;\n    const lastFeedback = resSecondArray.at(-1);\n    dataFeedback.push(lastFeedback);\n\n    console.log(dataFeedback)\n    return dataFeedback;\n\n  } catch (error) {\n    console.error('Помилка при отриманні відгуків:', error.message);\n    throw error;\n  }\n}","import refs from './refs';\n\n\nexport async function createdModal(data) {\n  const {\n    _id,\n    strArtist,\n    strArtistThumb,\n    intFormedYear,\n    intMembers,\n    strCountry,\n    strGender,\n    strBiographyEN,\n    genres = [],\n    albumsList = []\n  } = data;\n\n  const genresMarkup = genres.map(\n    genre => `<li class=\"artist__genre-item\">${genre}</li>`\n  ).join('');\nconsole.log('genres:', genres);\n  const albumMarkup = albumsList.map(({ strAlbum, intYearReleased, tracks = [] }) => {\n    const tracksMarkup = tracks.map(({ strTrack, intDuration, movie }) => {\n      const durationMin = Math.floor(intDuration / 60000);\n      const durationSec = String(Math.floor((intDuration % 60000) / 1000)).padStart(2, '0');\n      const safeUrl = movie?.startsWith('http') ? movie : movie ? `https://${movie}` : '';\n\n      return `\n        <li class=\"track__row\">\n          <span class=\"track__title\">${strTrack}</span>\n          <span class=\"track__time\">${durationMin}:${durationSec}</span>\n          <span class=\"track__link\">\n            ${movie ? `<a href=\"${safeUrl}\" target=\"_blank\" aria-label=\"YouTube link\">\n              <svg class=\"icon-youtube\">\n                <use href=\"/img/sprite.svg#icon-youtube\"></use>\n              </svg>\n            </a>` : ''}\n          </span>\n        </li>\n      `;\n    }).join('');\n\n    return `\n      <li class=\"artist__genre-item\">\n        <p class=\"album__name\">${strAlbum} (${intYearReleased})</p>\n        <span>Track</span><span>Time</span><span>Link</span>\n        <ul class=\"album__track-list\">${tracksMarkup}</ul>\n      </li>\n    `;\n  }).join('');\n\n  const markup = `\n    <li class=\"artists__item\" data-id=\"${_id}\">\n      <p class=\"artists__name\">${strArtist}</p>\n      <div class=\"wrap-artists__image\" style=\"background-image: url('${strArtistThumb}');\"></div>\n      <div class=\"artist__info\">\n        <p class=\"year\">Years active <span class=\"artist__info-value\">${intFormedYear}–present</span></p>\n        <p class=\"gender\">Sex <span class=\"artist__info-value\">${strGender}</span></p>\n        <p class=\"members\">Members <span class=\"artist__info-value\">${intMembers}</span></p>\n        <p class=\"country\">Country <span class=\"artist__info-value\">${strCountry}</span></p>\n        <p class=\"title__biography\">Biography</p>\n        <p class=\"artists__biography\">${strBiographyEN}</p>\n      </div>\n      <ul class=\"artists__genres-list\">${genresMarkup}</ul>\n      <p class=\"title__albums-modal\">Albums</p>\n      <ul class=\"modal__album-list\">${albumMarkup}</ul>\n    </li>\n  `;\n\n  refs.modalAlbumList.innerHTML = markup;\n}\n\nexport function renderFeedback(feedbackData) {\n  const wrapperElem = document.querySelector('.swiper-wrapper');\n\n  const markup = feedbackData.map(({ name, rating, descr }) => `\n    <div class=\"swiper-slide\">\n        <p class=\"feedback-stars\">${rating} (тут будуть зірочки :) )</p>\n        <p class=\"feedback-descr\">\"${descr}\"</p>\n        <p class=\"feedback-name\">${name}</p>\n    </div>\n  `).join('');\n\n  wrapperElem.innerHTML = markup;\n  console.log(wrapperElem);\n}\n","import refs from './refs.js';\nimport { getArtists, getArtistsAlbumsId, getArtistById } from './artists-api.js';\nimport { createdModal } from './render-function.js';\n\nconst artistId = '65ada5b8af9f6d155db4806b';\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  try {\n    const artistData = await getArtistById(artistId); \n    const response = await getArtists();\n\n    const artistsList = response.artists || [];\n    const artistWithGenres = artistsList.find(artist => artist._id === artistId);\n    const genres = artistWithGenres?.genres || [];\n\n    const { albumsList = [] } = await getArtistsAlbumsId(artistId);\n\n    const fullArtistData = { ...artistData, genres, albumsList };\n    createdModal(fullArtistData);\n\n  } catch (error) {\n    console.error('Помилка при завантаженні артиста або альбомів:', error.message);\n  }\n});","import {getFeedback} from './artists-api'\nimport {renderFeedback} from './render-function'\nimport Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\nfunction initSwiper(){\n    var swiper = new Swiper(\".swiper\", {\n      // autoHeight: true,\n      // cssMode: true,\n      navigation: {\n        nextEl: \".swiper-button-next\",\n        prevEl: \".swiper-button-prev\",\n      },\n      pagination: {\n        el: \".swiper-pagination\",\n        clickable: true,\n      },\n      mousewheel: true,\n      keyboard: true,\n    });\n}\n\n\nasync function initFeedback() {\n    const feedbackData = await getFeedback();\n    renderFeedback(feedbackData);\n    initSwiper()\n}\n\n\n\ninitFeedback()\n\n","document.addEventListener('DOMContentLoaded', () => {\n  //   Menu elements\n  const menuElements = {\n    openBtn: document.querySelector('[data-menu-open]'),\n    closeBtn: document.querySelector('[data-menu-close]'),\n    menu: document.querySelector('[data-menu]'),\n    links: document.querySelectorAll('.menu-list .link-menu'),\n    header: document.querySelector('.header'),\n  };\n\n  const config = {\n    scrollBehavior: 'smooth',\n    scrollDelay: 300,\n  };\n\n  // Open / close menu,\n  const toggleMenu = isOpen => {\n    menuElements.menu.classList.toggle('is-open', isOpen);\n    document.body.style.overflow = isOpen ? 'hidden' : '';\n    document.documentElement.style.scrollBehavior = isOpen\n      ? 'auto'\n      : config.scrollBehavior;\n  };\n\n  //   Animate scroll to target\n  const smoothScrollTo = targetId => {\n    const targetElement = document.querySelector(targetId);\n    if (!targetElement) return;\n\n    const headerHeight = menuElements.header.offsetHeight;\n    const targetPosition =\n      targetElement.getBoundingClientRect().top + window.scrollY - headerHeight;\n\n    window.scrollTo({\n      top: targetPosition,\n      behavior: config.scrollBehavior,\n    });\n  };\n\n  // Event listeners\n  menuElements.openBtn.addEventListener('click', () => toggleMenu(true));\n  menuElements.closeBtn.addEventListener('click', () => toggleMenu(false));\n\n  // Handle overlay click to close menu\n  menuElements.menu.addEventListener('click', e => {\n    if (\n      !e.target.closest('[data-menu-close]') &&\n      !e.target.closest('.link-menu') &&\n      !e.target.closest('.link-logo')\n    ) {\n      toggleMenu(false);\n    }\n  });\n\n  // Menu link handling\n  menuElements.links.forEach(link => {\n    link.addEventListener('click', e => {\n      const targetId = link.getAttribute('href');\n      if (!targetId.startsWith('#')) return;\n\n      e.preventDefault();\n\n      //   If menu is open (in mobile view)\n      const isMobileMenuOpen = menuElements.menu.classList.contains('is-open');\n\n      if (isMobileMenuOpen) {\n        toggleMenu(false);\n        setTimeout(() => smoothScrollTo(targetId), config.scrollDelay);\n      } else {\n        smoothScrollTo(targetId);\n      }\n    });\n  });\n\n  //   Dismiss menu on desktop resize\n  window.addEventListener('resize', () => {\n    if (\n      window.innerWidth >= 768 &&\n      menuElements.menu.classList.contains('is-open')\n    ) {\n      toggleMenu(false);\n    }\n  });\n});\n"],"names":["refs","axios","getArtists","currentPage","params","endPoint","error","getArtistById","artistId","res","getArtistsAlbumsId","getFeedback","page","dataFeedback","resFirst","firstFeedback","total","maxPage","randomPage","resThirdArray","randomFeedback","lastFeedback","createdModal","data","_id","strArtist","strArtistThumb","intFormedYear","intMembers","strCountry","strGender","strBiographyEN","genres","albumsList","genresMarkup","genre","albumMarkup","strAlbum","intYearReleased","tracks","tracksMarkup","strTrack","intDuration","movie","durationMin","durationSec","safeUrl","markup","renderFeedback","feedbackData","wrapperElem","name","rating","descr","artistData","artistWithGenres","artist","fullArtistData","initSwiper","Swiper","initFeedback","menuElements","config","toggleMenu","isOpen","smoothScrollTo","targetId","targetElement","headerHeight","targetPosition","e","link"],"mappings":"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"}